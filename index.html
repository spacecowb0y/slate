
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for the Kittn API"
        >
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-b12a2749.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-1327c109.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#nfts" class="toc-h1 toc-link" data-title="NFTs">NFTs</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-nfts" class="toc-h2 toc-link" data-title="Get all NFTs">Get all NFTs</a>
                  </li>
                  <li>
                    <a href="#get-nfts-filtered" class="toc-h2 toc-link" data-title="Get NFTs filtered">Get NFTs filtered</a>
                  </li>
                  <li>
                    <a href="#get-a-specific-nft" class="toc-h2 toc-link" data-title="Get a Specific NFT">Get a Specific NFT</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#categories" class="toc-h1 toc-link" data-title="Categories">Categories</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-categories" class="toc-h2 toc-link" data-title="Get all categories">Get all categories</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#users-auth" class="toc-h1 toc-link" data-title="Users auth">Users auth</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-account" class="toc-h2 toc-link" data-title="Create account">Create account</a>
                  </li>
                  <li>
                    <a href="#login" class="toc-h2 toc-link" data-title="Login">Login</a>
                  </li>
                  <li>
                    <a href="#logged-in-user" class="toc-h2 toc-link" data-title="Logged in user">Logged in user</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#cart" class="toc-h1 toc-link" data-title="Cart">Cart</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#list-nfts-in-the-cart" class="toc-h2 toc-link" data-title="List NFTs in the cart">List NFTs in the cart</a>
                  </li>
                  <li>
                    <a href="#add-nft" class="toc-h2 toc-link" data-title="Add NFT">Add NFT</a>
                  </li>
                  <li>
                    <a href="#remove-nft" class="toc-h2 toc-link" data-title="Remove NFT">Remove NFT</a>
                  </li>
                  <li>
                    <a href="#checkout-cart" class="toc-h2 toc-link" data-title="Checkout cart">Checkout cart</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Kanvas API specs!</p>

<p>The API examples use <a href="https://httpie.io/">http</a>, basically cURL but a bit easier to use.</p>
<h1 id='authentication'>Authentication</h1>
<p>Endpoints that require a logged in user expect a valid token in the Authorization header. To get new a token, call <code>/auth/login</code>.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># Login, and get an access token:</span>
http POST <span class="s2">"/auth/login"</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh">
{
    "address": "</span><span class="nv">$user_address</span><span class="sh">",
    "signedPayload": "</span><span class="nv">$user_password</span><span class="sh">",
}
</span><span class="no">EOF
</span></code></pre></div>
<blockquote>
<p>To authorize at authorization guarded endpoints eg <code>/auth/logged_in</code>, use this code:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>http GET <span class="s2">"/auth/logged_in"</span> <span class="se">\</span>
  Authorization:<span class="s2">"Bearer </span><span class="nv">$access_token</span><span class="s2">"</span>
</code></pre></div>
<blockquote>
<p>Make sure to replace <code>$access_token</code> with your token.</p>
</blockquote>

<aside class="notice">
You must replace <code>$access_token</code> with your personal API key.
</aside>

<p>For more info see the &quot;Users auth&quot; section.</p>
<h1 id='nfts'>NFTs</h1><h2 id='get-all-nfts'>Get all NFTs</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>http <span class="s2">"/nfts"</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"currentPage"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"numberOfPages"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="nl">"nfts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SomeNFT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"tokenId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"contract"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ipfsHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ipfs://somenft"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dataUri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d-art.mypinata.cloud/ipfs/Qmf9LEvo73GGeymjxMYWCggc91DKCXcKVAiNoHT6ZVrjq2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"json"</span><span class="p">:</span><span class="w"> </span><span class="s2">"encoded"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mountains"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"steep hills that go heigh"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request'>HTTP Request</h3>
<p><code>GET /nfts</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>1</td>
<td>Paginate through results, first page is 1</td>
</tr>
<tr>
<td>pageSize</td>
<td>10</td>
<td>Number of NFTs to fit on a single page</td>
</tr>
<tr>
<td>firstRequestAt</td>
<td>undefined</td>
<td>In seconds since UNIX, the timestamp of first pagination action (note: responsibility of setting this is at the caller). If set, only NFTs will be returned that were listed on the store at or before this timestamp.</td>
</tr>
<tr>
<td>orderBy</td>
<td>&#39;id&#39;</td>
<td>must be one of [&#39;id&#39;, &#39;price&#39;, &#39;name&#39;, &#39;views&#39;].</td>
</tr>
<tr>
<td>order</td>
<td>&#39;asc&#39;</td>
<td>must be one of [&#39;asc&#39;, &#39;desc&#39;].</td>
</tr>
</tbody></table>
<h2 id='get-nfts-filtered'>Get NFTs filtered</h2>
<p>Currently, NFTs can be filtered by:
- list of categories (comma separated category id)
- NFT owner address.</p>

<p>At least one filter must be specified (so, at least a category or at least the address). If both are specified, NFTs that fit both filters are returned (so it&#39;s AND logic here, not OR).</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>http <span class="s2">"/nfts/filter"</span> <span class="nv">categories</span><span class="o">==</span>1,2 <span class="nv">address</span><span class="o">==</span>tz1
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"currentPage"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"numberOfPages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"nfts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SomeNFT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"tokenId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"contract"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ipfsHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ipfs://somenft"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dataUri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d-art.mypinata.cloud/ipfs/Qmf9LEvo73GGeymjxMYWCggc91DKCXcKVAiNoHT6ZVrjq2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"json"</span><span class="p">:</span><span class="w"> </span><span class="s2">"encoded"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mountains"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"steep hills that go heigh"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /nfts/filter</code></p>
<h3 id='query-parameters-2'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>categories</td>
<td>undefined</td>
<td>Get NFTs that belong to any of a comma separated set of category identifiers (eg: <code>1,4,10</code>). Multiple entries here means: find NFTs that belong to at least one of the given categories.</td>
</tr>
<tr>
<td>address</td>
<td>undefined</td>
<td>Get NFTs that are owned by some tezos address.</td>
</tr>
<tr>
<td>page</td>
<td>1</td>
<td>Paginate through results, first page is 1.</td>
</tr>
<tr>
<td>pageSize</td>
<td>10</td>
<td>Number of NFTs to fit on a single page</td>
</tr>
<tr>
<td>firstRequestAt</td>
<td>undefined</td>
<td>In seconds since UNIX, the timestamp of first pagination action (note: responsibility of setting this is at the caller). If set, only NFTs will be returned that were listed on the store at or before this timestamp.</td>
</tr>
<tr>
<td>orderBy</td>
<td>&#39;id&#39;</td>
<td>must be one of [&#39;id&#39;, &#39;price&#39;, &#39;name&#39;, &#39;views&#39;].</td>
</tr>
<tr>
<td>order</td>
<td>&#39;asc&#39;</td>
<td>must be one of [&#39;asc&#39;, &#39;desc&#39;].</td>
</tr>
</tbody></table>
<h2 id='get-a-specific-nft'>Get a Specific NFT</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>http <span class="s2">"/nfts/2"</span>
</code></pre></div>
<blockquote>
<p>replace <code>2</code> with any NFT id</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NFT2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tokenId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contract"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ipfsHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ipfs://somenft+"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dataUri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d-art.mypinata.cloud/ipfs/QmYjTQiHo4imnccru6Ucsv1MwFLgtHTA1NzXYeZZPPTvq1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"I"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guess?"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"json"</span><span class="p">:</span><span class="w"> </span><span class="s2">"encoded"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"its not actually blue"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"water"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /nfts/:id</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The id of the NFT to retrieve</td>
</tr>
</tbody></table>
<h1 id='categories'>Categories</h1><h2 id='get-all-categories'>Get all categories</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>http <span class="s2">"/categories"</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"children"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"children"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"children"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"its part of rock"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nirvana"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"its part of a mountain"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rock"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"steep hills that go heigh"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mountains"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"children"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"its not actually blue"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"water"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div><h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET /categories</code></p>
<h1 id='users-auth'>Users auth</h1><h2 id='create-account'>Create account</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>http POST <span class="s2">"/auth/register"</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh">
{
    "address": "</span><span class="nv">$user_address</span><span class="sh">",
    "signedPayload": "</span><span class="nv">$user_password</span><span class="sh">"
}
</span><span class="no">EOF
</span></code></pre></div><h3 id='http-request-5'>HTTP Request</h3>
<p><code>POST /auth/register</code></p>
<h3 id='body-parameters'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>tezos address</td>
</tr>
<tr>
<td>signedPayload</td>
<td>password</td>
</tr>
<tr>
<td>name</td>
<td>username (currently it&#39;s optional)</td>
</tr>
</tbody></table>
<h2 id='login'>Login</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>http POST <span class="s2">"/auth/login"</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh">
{
    "address": "</span><span class="nv">$user_address</span><span class="sh">",
    "signedPayload": "</span><span class="nv">$user_password</span><span class="sh">"
}
</span><span class="no">EOF
</span></code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"addr"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"maxAge"</span><span class="p">:</span><span class="w"> </span><span class="s2">"86400000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwibmFtZSI6bnVsbCwiYWRkcmVzcyI6ImFkZHIiLCJyb2xlcyI6W10sImlhdCI6MTYzNzI0ODM5Nn0.HovGQYf8QaVh0ZEdLhYBzBYqqYTrH34j6MUDBw8Bb2M"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-6'>HTTP Request</h3>
<p><code>POST /auth/login</code></p>
<h3 id='body-parameters-2'>Body parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>tezos address</td>
</tr>
<tr>
<td>signedPayload</td>
<td>password</td>
</tr>
</tbody></table>
<h2 id='logged-in-user'>Logged in user</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>http <span class="s2">"/auth/logged_user"</span> Authorization:<span class="s2">"Bearer </span><span class="nv">$access_token</span><span class="s2">"</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"addr"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-7'>HTTP Request</h3>
<p><code>GET /auth/logged_user</code></p>
<h1 id='cart'>Cart</h1>
<p>All endpoints related to shopping cart management.</p>

<p>A cart session is either derived from the cookie session (when not logged in)
or from the cart session that is connected to the logged in user. When logging
in after having done some cart operations on the cookie session, the user (if
not already connected to another cart session) is connected to the cookie based
cart session. From thereon this cart session stays connected to this user until
either it is checked out by the user, or it expires.</p>

<p>The only endpoint that requires being logged in is the checkout endpoint.</p>

<p>Every cart session has an expiration date. Currently this is 30 minutes after
the last POST action (add, remove).</p>
<h2 id='list-nfts-in-the-cart'>List NFTs in the cart</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>http <span class="s2">"/users/cart/list"</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-18T14:29:59.403Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"nfts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SomeNFT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"tokenId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"contract"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ipfsHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ipfs://somenft"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"dataUri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d-art.mypinata.cloud/ipfs/Qmf9LEvo73GGeymjxMYWCggc91DKCXcKVAiNoHT6ZVrjq2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"json"</span><span class="p">:</span><span class="w"> </span><span class="s2">"encoded"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mountains"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"steep hills that go heigh"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-8'>HTTP Request</h3>
<p><code>GET /users/cart/list</code></p>
<h2 id='add-nft'>Add NFT</h2>
<p>Note, this may fail if</p>

<ul>
<li>This NFT is already sold out</li>
<li>All remaining editions of this NFT are already in other active carts</li>
<li>This NFT is already in the active cart (currently we only allow 1 edition per NFT per active cart)</li>
</ul>
<div class="highlight"><pre class="highlight shell tab-shell"><code>http POST <span class="s2">"/users/cart/add/2"</span>
</code></pre></div><h3 id='http-request-9'>HTTP Request</h3>
<p><code>POST /users/cart/add/:id</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The id of the NFT to add to the cart</td>
</tr>
</tbody></table>
<h2 id='remove-nft'>Remove NFT</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>http POST <span class="s2">"/users/cart/remove/2"</span>
</code></pre></div><h3 id='http-request-10'>HTTP Request</h3>
<p><code>POST /users/cart/remove/:id</code></p>
<h3 id='url-parameters-3'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The id of the NFT to remove from the cart</td>
</tr>
</tbody></table>
<h2 id='checkout-cart'>Checkout cart</h2>
<p>Placeholder: for now, all NFTs in the cart are immediately assigned to the
user, without any sort of payment / minting.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>http POST <span class="s2">"/users/cart/checkout"</span> Authorization:<span class="s2">"Bearer </span><span class="nv">$access_token</span><span class="s2">"</span>
</code></pre></div><h3 id='http-request-11'>HTTP Request</h3>
<p><code>POST /users/cart/checkout</code></p>
<h1 id='errors'>Errors</h1>
<p>-</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
